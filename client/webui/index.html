<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WOL Plus 配置</title>
    <!-- 样式表 -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/animations.css">
</head>
<body>
    <!-- 登录界面 -->
    <div class="container" id="loginContainer">
        <!-- Logo -->
        <div style="text-align: center; margin-bottom: 20px;">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#667eea" stroke-width="2">
                <path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path>
                <line x1="12" y1="2" x2="12" y2="12"></line>
            </svg>
        </div>
        <h2>WOL Plus</h2>

        <!-- 登录表单 -->
        <form id="loginForm" onsubmit="return false;">
            <div class="form-group">
                <label for="username">用户名</label>
                <input type="text" id="username" placeholder="请输入用户名" autocomplete="username">
            </div>
            <div class="form-group">
                <label for="password">密码</label>
                <input type="password" id="password" placeholder="请输入密码" autocomplete="current-password">
            </div>
            <div class="button-group">
                <button type="button" class="save-btn" onclick="login()">登 录</button>
            </div>
            <p id="loginMessage"></p>
        </form>
    </div>

    <!-- 配置界面 -->
    <div class="container" id="configContainer" style="display: none;">
        <!-- 主面板 -->
        <div id="mainPanel">
            <!-- 头部 -->
            <header class="header-row">
                <div class="header-title">
                    <svg class="app-logo" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path>
                        <line x1="12" y1="2" x2="12" y2="12"></line>
                    </svg>
                    <h2 style="margin: 0;">WOL Plus</h2>
                </div>
                <div class="header-actions">
                    <button class="icon-btn settings-btn" onclick="showSettings()" title="设置">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path d="M12 1v6m0 6v6M4.22 4.22l4.24 4.24m5.08 5.08l4.24 4.24M1 12h6m6 0h6M4.22 19.78l4.24-4.24m5.08-5.08l4.24-4.24"></path>
                        </svg>
                    </button>
                    <button class="icon-btn logout-btn" onclick="logout()" title="退出登录">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                            <polyline points="16 17 21 12 16 7"></polyline>
                            <line x1="21" y1="12" x2="9" y2="12"></line>
                        </svg>
                    </button>
                </div>
            </header>

            <!-- 关机倒计时区域 -->
            <section class="countdown-section">
                <div class="countdown-header">
                    <span>关机倒计时</span>
                    <span id="statusIndicator" class="status-indicator status-online"></span>
                </div>
                <div class="countdown-inputs">
                    <div class="countdown-field">
                        <label>设置时长（秒）</label>
                        <input type="number" id="shutdownTime" placeholder="60">
                    </div>
                    <div class="countdown-field">
                        <label>剩余时间</label>
                        <input type="text" id="remainingTime" readonly value="0">
                    </div>
                </div>
            </section>

            <!-- 网络配置 -->
            <section class="network-section">
                <div class="form-group">
                    <label for="mac">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                            <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
                        </svg>
                        MAC 地址
                    </label>
                    <input type="text" id="mac" disabled>
                </div>

                <div class="form-group">
                    <label class="field-label" for="extra">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="12" y1="16" x2="12" y2="12"></line>
                            <line x1="12" y1="8" x2="12.01" y2="8"></line>
                        </svg>
                        附加数据（6字节）
                        <span class="byte-count" id="extraByteCount">0/6</span>
                    </label>
                    <div class="input-wrapper">
                        <input type="text" id="extra" class="hex-input" placeholder="12:34:56:78:9A:BC" maxlength="17" spellcheck="false" autocomplete="off">
                        <span class="input-status" id="extraStatus">
                            <svg class="status-icon" id="extraStatusIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="16" x2="12" y2="12"></line>
                                <line x1="12" y1="8" x2="12.01" y2="8"></line>
                            </svg>
                        </span>
                    </div>
                    <div class="field-hint">
                        <span class="hint-text">格式：XX:XX:XX:XX:XX:XX（6字节十六进制）</span>
                        <span class="hint-example" onclick="setExampleExtra()">填入示例</span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="networkInterface">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 12.55a11 11 0 0 1 14.08 0"></path>
                            <path d="M1.42 9a16 16 0 0 1 21.16 0"></path>
                            <path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path>
                            <line x1="12" y1="20" x2="12.01" y2="20"></line>
                        </svg>
                        网络接口
                    </label>
                    <input type="text" id="networkInterface" disabled>
                </div>
            </section>

            <!-- 操作按钮 -->
            <div class="button-group">
                <button class="save-btn" onclick="saveConfig()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                        <polyline points="17 21 17 13 7 13 7 21"></polyline>
                        <polyline points="7 3 7 8 15 8"></polyline>
                    </svg>
                    保存配置
                </button>
                <button class="cancel-btn" onclick="cancelShutdown()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="15" y1="9" x2="9" y2="15"></line>
                        <line x1="9" y1="9" x2="15" y2="15"></line>
                    </svg>
                    取消关机
                </button>
            </div>

            <p id="message"></p>
        </div>

        <!-- 设置面板 -->
        <div id="settingsPanel">
            <header class="header-row">
                <button class="icon-btn back-btn" onclick="hideSettings()" title="返回">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="19" y1="12" x2="5" y2="12"></line>
                        <polyline points="12 19 5 12 12 5"></polyline>
                    </svg>
                </button>
                <h2 style="margin: 0;">安全设置</h2>
                <div style="width: 38px;"></div>
            </header>

            <section class="network-section">
                <div class="form-group">
                    <label for="usernameInput">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        用户名
                    </label>
                    <input type="text" id="usernameInput">
                </div>

                <div class="form-group">
                    <label for="newPassword">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                        新密码
                    </label>
                    <input type="password" id="newPassword" placeholder="留空则不修改">
                    <small style="color: #f5576c;">修改密码后需要重新登录</small>
                </div>

                <div class="button-group">
                    <button class="save-btn" onclick="saveSettings()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                            <polyline points="17 21 17 13 7 13 7 21"></polyline>
                            <polyline points="7 3 7 8 15 8"></polyline>
                        </svg>
                        保存设置
                    </button>
                </div>

                <p id="settingsMessage"></p>
            </section>
        </div>
    </div>

    <!-- JavaScript 模块 -->
    <script src="js/api.js"></script>
    <script src="js/session.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/config.js"></script>
    <script src="js/countdown.js"></script>
    <script src="js/extra-input.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
